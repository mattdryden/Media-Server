#!/bin/bash

CONFIG_PATH="/Volumes/media/"
MEDIA_PATH="/Users/matt/server/"
DOWNLOAD_PATH="/Volumes/media/downloads/"
PUID=501
PGID=501

function launch_container() {
    echo "Launching $1!"
    docker run -d --restart unless-stopped --name $1 $2
}

function sonarr() {
    launch_container "sonarr" "--link=sabnzbd:sabnzbd -p 8989:8989 -e PUID=$PUID -e PGID=$PGID -v /dev/rtc:/dev/rtc:ro -v ${CONFIG_PATH}config/sonarr:/config -v ${MEDIA_PATH}TV/:/tv -v ${DOWNLOAD_PATH}complete:/complete-downloads linuxserver/sonarr"
}

function radarr() {
    launch_container "radarr" "--link=sabnzbd:sabnzbd -p 7878:7878 -e PUID=$PUID -e PGID=$PGID -v /dev/rtc:/dev/rtc:ro -v ${CONFIG_PATH}config/radarr:/config -v ${MEDIA_PATH}Movies/:/movies -v ${DOWNLOAD_PATH}complete:/complete-downloads linuxserver/radarr"
}

function sabnzbd() {
    launch_container "sabnzbd" "-v /etc/localtime:/etc/localtime:ro -v ${CONFIG_PATH}config/sabnzbd:/config -v ${DOWNLOAD_PATH}complete:/complete-downloads -v ${DOWNLOAD_PATH}incomplete:/incomplete-downloads -e PGID=$PGID -e PUID=$PUID -p 8080:8080 -p 9090:9090 linuxserver/sabnzbd"
}

function plex() {
    launch_container "plex" "-p 32400:32400 -e VERSION=latest -e PUID=$PUID -e PGID=$PGID -v ${MEDIA_PATH}tmp:/transcode -v ${CONFIG_PATH}config/plex:/config -v ${MEDIA_PATH}:/data/media --gpus all linuxserver/plex"
}

function lidarr() {
    launch_container "lidarr" "--link=sabnzbd:sabnzbd -p 8686:8686 -e PUID=$PUID -e PGID=$PGID -v /dev/rtc:/dev/rtc:ro -v ${CONFIG_PATH}config/lidarr:/config -v ${MEDIA_PATH}Music/:/music -v ${DOWNLOAD_PATH}complete/:/complete-downloads linuxserver/lidarr"
}

function ombi() {
    launch_container "ombi" "-e PUID=$PUID -e PGID=$PGID -e TZ=Europe/London -p 3579:3579 -v ${CONFIG_PATH}config/ombi:/config linuxserver/ombi"
}

function tautulli() {
    launch_container "tautulli" "-e PUID=$PUID -e PGID=$PGID -e TZ=Europe/London -p 8181:8181 -v ${CONFIG_PATH}config/tautulli:/config -v ${CONFIG_PATH}config/plex/Library/Application\ Support/Plex\ Media\ Server/Logs:/logs linuxserver/tautulli"
}

function all() {
    sabnzbd
    sonarr
    radarr
    plex
    lidarr
    ombi
    tautulli
}

if [ $# -eq 0 ]
    then
        echo "No arguments supplied"
    else
        $1
fi


